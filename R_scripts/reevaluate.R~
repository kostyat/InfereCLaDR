#This file is made so that when I make changes to the evaluate.R procedure that produces the auprs.tsv file, I can easily go to each folder and make the new auprs.tsv file.

source("R_scripts/evaluate.R")

reevaluate <- function(in.dir) {
  params.and.input <- paste(full.dir, 'params_and_input.RData', sep='/')
  if (!file.exists(params.and.input)) {
    cat('No params_and_input.RData - skipping', in.dir, '\n')
    return()
  }
  load(params.and.input)
  summarizeResults(PARS$save.to.dir, PARS$eval.on.subset)
}

args <- commandArgs(trailingOnly = TRUE)
if (length(args) == 1) {
  in.dir <- args[1]
}
cat(in.dir)

reevaluate(in.dir)

#Usage:
#for d in output/bsubtilis/*/; do Rscript R_scripts/reevaluate.R $d; done
